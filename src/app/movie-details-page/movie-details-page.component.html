<header *ngIf="movie" [ngStyle]="{'--bg-image': 'url(' + backdropPath + ')'}">
    <div class="header-inner">
        <div class="left">
            <img [src]="posterPath" alt="poster" class="poster">
        </div>
        <div class="right">
            <h1 class="movie-title">{{movie.title}}</h1>
            <div class="rating" [ngStyle]="{'--rating': movie.voteAverage.toFixed(3)}">
                <a class="rating-score" [routerLink]="['/movie/' + id + '/reviews']">{{(movie.voteAverage *
                    0.5).toFixed(1)}}/5</a>
                <div class="stars" (click)="giveRating()" [class.active]="popupOpen">
                    <fa-icon [icon]="faStar" (mousemove)="onHoverStar(1)" [class.active]="activeStar >= 1"></fa-icon>
                    <fa-icon [icon]="faStar" (mousemove)="onHoverStar(2)" [class.active]="activeStar >= 2"></fa-icon>
                    <fa-icon [icon]="faStar" (mousemove)="onHoverStar(3)" [class.active]="activeStar >= 3"></fa-icon>
                    <fa-icon [icon]="faStar" (mousemove)="onHoverStar(4)" [class.active]="activeStar >= 4"></fa-icon>
                    <fa-icon [icon]="faStar" (mousemove)="onHoverStar(5)" [class.active]="activeStar >= 5"></fa-icon>
                </div>
                -
                <a class="rating-count" [routerLink]="['/movie/' + id + '/reviews']">{{ movie.voteCount }} reviews</a>
                <div class="rating-popup" *ngIf="popupOpen">
                    <h3 class="rating-popup-title">Want to leave a review?</h3>
                    <textarea name="rating-message" id="rating-message" cols="30" rows="3"
                        [(ngModel)]="ratingMessage"></textarea>
                    <div class="buttons">
                        <button class="secondary" (click)="popupOpen = false">Cancel</button>
                        <button class="primary" (click)="submitRating()">Submit</button>
                    </div>
                </div>
            </div>
            <hr>
            <h3 class="movie-tagline">{{movie.tagline}}</h3>

            <div class="spacer"></div>

            <div class="keywords">
                <div class="keyword" *ngFor="let keyword of movie.keywords;">{{ keyword }}</div>
            </div>
        </div>
    </div>
</header>

<div class="content-wrapper">
    <main *ngIf="movie">
        <p class="movie-description">{{movie.overview}}</p>

        <div class="collection" *ngIf="movie.belongsToCollection" [ngStyle]="{'--bg-image': 'url(https://image.tmdb.org/t/p/w500' + 
            (movie.belongsToCollection.backdropPath ?? movie.belongsToCollection.posterPath) + ')'}">
            <h1 class="collection-title">Part of {{ getCollectionName(movie.belongsToCollection.name) }}</h1>
            <a [routerLink]="['/collection/' + movie.belongsToCollection.id]" class="view-collection-button">View
                Collection</a>
        </div>

        <div class="details">Details:
            <div class="cast" *ngFor="let cast of movie?.cast">Actor: {{cast.name}} playing as {{cast.character}}</div>
            <div class="genres">Genres: {{genreNames}}
            </div>
            <div class="productioncountries">Country of origin: {{movie.productionCountries}}</div>
            <div class="language">Spoken language(s): {{this.languageNames}}</div>
            <div class="production-companies">Production companies: {{companyNames}}
            </div>
            <div class="release-date">Release date: {{dateOfRelease}}</div>
            <div class="budget">Budget: {{budgetDisplay}}</div>
            <div class="original-title">Also known as: {{movie.originalTitle}}</div>
        </div>
    </main>
</div>